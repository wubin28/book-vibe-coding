# Promptyoo-1业务需求描述

## 第二阶段：智能提示词优化

### 基本功能

Promptyoo-1的提示词优化功能将原有的“基础提示词优化模式”设为DeepSeek API的故障应急模式，并默认使用下述新增的“DeepSeek API优化模式”来优化原始提示词。

在将原始提示词发送给DeepSeek API之前，Promptyoo-1会自动在其前面添加辅助优化提示词（需将其中的<用户原始提示词>替换为实际的用户输入）：

<markdown>
请按以下步骤优化用户给出的原始提示词。
1. 创建一个空的“辅助优化提示词”，用于优化用户提供的原始提示词（见后文）。
2. 如果原始提示词未指定AI要扮演的角色，请根据提示词内容确定相关领域，然后在“辅助优化提示词”后添加“你是xxx领域的专家”。这里的“xxx”指你根据提示词确定的专业领域。
3. 如果原始提示词未说明回复格式要求，在“辅助优化提示词”后添加“请提供主要观点的网页链接，以便核实”。
4. 如果原始提示词未提及用户对AI的顾虑，在“辅助优化提示词”后添加“如遇不确定信息，请如实告知，不要编造”。
5. 使用整理好的“辅助优化提示词”优化下面的原始提示词。确保优化后的提示词清晰流畅，且只提供优化后的提示词，不要在结果提示词之前和之后附加其他说明。
用户的原始提示词是：<用户原始提示词>
</markdown>

DeepSeek API收到上述请求后，应该返回类似如下所示的优化后的提示词。

<markdown>
你是人工智能领域的专家，请为我推荐几个实用的提示词优化工具，并简要说明它们的主要功能和优势。请提供相关工具的官方网站或权威评测链接以便核实。如遇不确定信息，请如实告知，不要编造。
</markdown>

上面这段优化后的提示词显然比原始提示词更加专业和完整。

为了提升使用体验，这个应用还具备流式响应（streaming response）功能。当DeepSeek API开始回复时，用户能在“Optimize prompt”按钮下方的结果区域（Optimized prompt）看到文字逐字呈现的效果，让用户尽早看到优化后的提示词。

当DeepSeek API访问失败（可能由网络问题、API密钥无效或服务繁忙等原因导致），则Promptyoo-1会自动启用之前已经实现了的“基础提示词优化模式”返回优化后的提示词。

### 提示词优化历史管理功能

用户每完成一次提示词优化（即输入提示词、点击“Optimize prompt”按钮并获得优化结果，无论是否使用了“基础提示词优化模式”还是“智能提示词优化模式”），系统会自动将该记录保存到数据库，并将其置顶显示在左侧边栏“Today”分组的历史记录列表中。

每条历史记录都有一个最长30个汉字的标题，标题内容即为用户的原始提示词。如果原始提示词超过30个汉字，系统会自动截取前30个汉字作为标题。

Promptyoo-1允许历史记录标题重复。

点击历史记录后，右侧区域会显示对应的原始提示词和优化后的提示词，该记录同时会以浅灰色背景标记为已选中状态。用户可以查看右侧内容，并使用“Copy”按钮复制优化后的提示词。此时历史记录的原始提示词无法编辑，且“Optimize prompt”按钮处于禁用状态。不过，用户可以复制该历史记录的原始提示词，以便在新建优化任务时使用。

在左侧边栏中，每个历史记录标题最多显示前16个汉字。当用户将鼠标悬停在超长标题上时，会出现一个黑底白字的悬浮提示，显示该标题的前30个字。

鼠标悬停在历史记录上时，其右侧会依次显示两个图标：编辑（编辑图标）和删除（红色垃圾桶图标）。

点击编辑图标后，相应的历史记录标题变为可编辑状态。按回车确认后，新标题会保存到数据库并更新到左侧边栏。如果用户清空标题后按回车，则保持原标题不变。

点击红色垃圾桶图标后，会弹出确认对话框显示“是否删除？”及要删除的记录标题。确认后，该记录将从数据库和左侧边栏中永久移除。
